---
# Stress Test Pods for HPA Testing
# Apply with: kubectl apply -f hpa-stress-test.yaml
# Delete with: kubectl delete -f hpa-stress-test.yaml

apiVersion: v1
kind: Pod
metadata:
  name: stress-auth-service
  namespace: scrapzee
  labels:
    app: stress-test
    target: auth-service
spec:
  containers:
  - name: stress
    image: polinux/stress
    command: ["stress"]
    args:
    - "--cpu"
    - "4"
    - "--timeout"
    - "600s"  # 10 minutes
    - "--verbose"
    resources:
      requests:
        cpu: "200m"
        memory: "64Mi"
      limits:
        cpu: "1000m"
        memory: "128Mi"
  restartPolicy: Never

---
apiVersion: v1
kind: Pod
metadata:
  name: stress-user-service
  namespace: scrapzee
  labels:
    app: stress-test
    target: user-service
spec:
  containers:
  - name: stress
    image: polinux/stress
    command: ["stress"]
    args:
    - "--cpu"
    - "4"
    - "--timeout"
    - "600s"
    - "--verbose"
    resources:
      requests:
        cpu: "200m"
        memory: "64Mi"
      limits:
        cpu: "1000m"
        memory: "128Mi"
  restartPolicy: Never

---
apiVersion: v1
kind: Pod
metadata:
  name: stress-dealer-service
  namespace: scrapzee
  labels:
    app: stress-test
    target: dealer-service
spec:
  containers:
  - name: stress
    image: polinux/stress
    command: ["stress"]
    args:
    - "--cpu"
    - "4"
    - "--timeout"
    - "600s"
    - "--verbose"
    resources:
      requests:
        cpu: "200m"
        memory: "64Mi"
      limits:
        cpu: "1000m"
        memory: "128Mi"
  restartPolicy: Never

---
apiVersion: v1
kind: Pod
metadata:
  name: stress-pricing-service
  namespace: scrapzee
  labels:
    app: stress-test
    target: pricing-service
spec:
  containers:
  - name: stress
    image: polinux/stress
    command: ["stress"]
    args:
    - "--cpu"
    - "4"
    - "--timeout"
    - "600s"
    - "--verbose"
    resources:
      requests:
        cpu: "200m"
        memory: "64Mi"
      limits:
        cpu: "1000m"
        memory: "128Mi"
  restartPolicy: Never

---
apiVersion: v1
kind: Pod
metadata:
  name: stress-frontend
  namespace: scrapzee
  labels:
    app: stress-test
    target: frontend
spec:
  containers:
  - name: stress
    image: polinux/stress
    command: ["stress"]
    args:
    - "--cpu"
    - "4"
    - "--timeout"
    - "600s"
    - "--verbose"
    resources:
      requests:
        cpu: "200m"
        memory: "64Mi"
      limits:
        cpu: "1000m"
        memory: "128Mi"
  restartPolicy: Never